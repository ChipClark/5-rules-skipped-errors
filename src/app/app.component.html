<!--The content below is only a placeholder and can be replaced.-->
<app-header></app-header>

<div class="main-body container">
    <div *ngIf="displayVendors" class="filtercontrols" id="Vendor filtercontrols">
      <h2 class="row">Vendors</h2>
      <div class="row">
        <div class="col-4 searchbar" id="searchbar">
            <input class="form-control searchbar" id="SearchBar" placeholder="Search by vendor" value="" autofocus 
            [(ngModel)]="searchTerm" (input)="searchTerm ? addQueryParams({search: searchTerm}) : addQueryParams({search: null})"><br>
                  
        
          </div>
          <div class="col-2" id="navigation">
              <!-- <button mat-raised-button (click)="displayVendors = false; displayTransactions = true;">&nbsp;Transactions&nbsp;</button> -->
          </div>
          <div class="col-2" id="navigation">
            <a href="" (click)="clearFilters()">Clear</a>
        </div>
          
          
          <!-- <div class="col-2 moveup10">
                  <form  class="moveup10" id="citymenu">
                          <mat-form-field ng-cloak id="citydropdown" [formGroup]="materials.cityMenu" >
                                  <mat-select placeholder="Office" class="useroptions" name="office" formControlName="cityController" [value]="cityid" >
                                          <mat-option (click)="addQueryParams({city: null});" [value]="">Firm-wide</mat-option>
                                          <mat-option (click)="addQueryParams({city: 4});" [value]="4" >Century City</mat-option>
                                          <mat-option (click)="addQueryParams({city: 1});" [value]="1" >Los Angeles</mat-option>
                                          <mat-option (click)="addQueryParams({city: 2});" [value]="2" >Orange County</mat-option>
                                          <mat-option (click)="addQueryParams({city: 3});" [value]="3" >San Diego</mat-option>
                                          <mat-option (click)="addQueryParams({city: 5});" [value]="5" >San Francisco</mat-option>
                                  </mat-select>
                          </mat-form-field>
                  </form>
          </div> -->
          
    
      </div>
    
    </div>
    <div *ngIf="displayTransactions" class="filtercontrols" id="Transaction filtercontrols">
        <div class="row">
            <div id="address" class="col-8">
                <h4>{{currentVendor.vendorname}}</h4>
                {{currentVendor.address1}}<br>
                {{currentVendor.citystatezip}}
            </div>
            <div class="col-2" id="spacer">      </div>
            <div class="col-2" id="navigation">
                <button mat-raised-button (click)="displayVendors = true; displayTransactions = false; currentVendor = null;">&nbsp;Back&nbsp;</button>
            </div>
            
        </div>
        <div class="row">
            <div class="col-12"><hr></div>
        </div>

        <h3 class="row">Transactions</h3>
        
      
    
    </div>
    <div *ngIf="displayVendors">
        <div class="row" id="idHeaders">
            <div class="vendorname title col-4">Name </div>
            <div class="invoice title col-1">Invoices</div>
            <div class="title address col-2">City</div>
            <div class="title col-2 paymentdate">Last Payment</div>
            <div class="title invoiceamount col-2">Total</div>
            <div class="links title col-1"></div>
          </div>
          
          <div class="row" id="dataTable">
            <cdk-virtual-scroll-viewport itemSize="20" id="vendorpage" class="vendorpage">
              <div *cdkVirtualFor="let vendor of vendors | search: searchTerm; let i = index; odd as isOdd; even as isEven" >
                  <!--| search: searchTerm-->
                <div [class.Odd]="isOdd" [class.Even]="isEven" class="row" >
                    <button class="vendorrow col-11"  (click)="vendorname = vendor.vendorname; currentVendor = vendor; getTransactions(vendor.vendoruno, 'date')">
                      <div class="row">
                        <div class="col-4 vendorname">{{vendor.vendorname}}</div>
                        <div class="col-2 invoicecount">{{vendor.invoices}}</div>
                        <div class="col-2 address">{{vendor.city}}</div>
                        <div class="col-2 paymentdate">{{vendor.lastpayment | date:'shortDate'}}</div>
                        <div class="col-2 invoiceamount">{{vendor.totalinvoiceamount  | currency :'USD':'symbol':'1.2-2' }}</div>
                      </div>
                    </button>
                    <div class="col-1 payments">
                        <button class="transdetail" (click)="vendorname = vendor.vendorname; currentVendor = vendor; getTransactions(vendor.vendoruno, 'date')" >Payments</button>
                    </div>
                  <!-- </button> -->
                    
                </div>
              </div>
            </cdk-virtual-scroll-viewport>
        </div>

    </div>

    <!--  *************************************************  
          Display Transactions 
          *************************************************-->
    <div *ngIf="displayTransactions">
        <div class="row" id="idHeaders">
            <div class="vendorname title col-3">Vendor</div>
            <div class="invoice title col-1">Invoice</div>
            <button class="title datebutton col-1" (click)="getTransactions(currentVendor.vendoruno, 'date')" >
                Date <div *ngIf="datedirection && sortByDate" class="arrow">&darr;</div><div *ngIf="!datedirection && sortByDate" class="arrow">&uarr;</div>
            </button>
            <!-- <div class="links title col-1"></div> -->
            <button class="title col-2 amountbutton" (click)="getTransactions(currentVendor.vendoruno, 'amount')" >
                Amount<div *ngIf="sortamount && !sortByDate" class="arrow">&darr;</div><div *ngIf="!sortamount && !sortByDate" class="arrow">&uarr;</div>
            </button>
            <!-- <div class="total title col-1">Total</div> -->
            <div class="links title col-5">Description</div>
          </div>
          
          <div class="row" id="dataTable">
            <cdk-virtual-scroll-viewport itemSize="20" id="vendorpage" class="vendorpage">
              <div *cdkVirtualFor="let t of vendorTransactions  ; let i = index; odd as isOdd; even as isEven" >
                  <!--| search: searchTerm-->
                <div [class.Odd]="isOdd" [class.Even]="isEven" class="row" >
                  <!-- <button class="vendor"  (click)="setVendor(vendors); openWindow(addMemberToCommitteesModal)" > -->
                    <div class="col-3 columndata">{{vendorname}}</div>
                    <div class="col-1 columndata">{{t.invoicenumber}}</div>
                    <div class="col-1 columndata">
                        {{t.transactionpostdate  | date:'shortDate'}}
                    </div>
                    <div class="col-2 columndata financial">{{t.invoiceamount | currency :'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-5 columndata">{{t.invoicenarrative}}</div>
                  <!-- </button> -->
                    
                </div>
              </div>
            </cdk-virtual-scroll-viewport>
        </div>


    </div>
    

</div>

<app-footer></app-footer>
